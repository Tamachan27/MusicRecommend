<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>éŸ³æ¥½MBTIè¨ºæ–­</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
  body{ font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue",sans-serif; background:#f5f5f5; margin:0; color: #333; }
  .container{ max-width:600px; margin:0 auto; padding:20px; }
  .card{ background:#fff; border-radius:14px; padding:20px; margin-bottom:20px; box-shadow:0 6px 20px rgba(0,0,0,.08); }
  h1 { text-align: center; font-size: 24px; }
  h2 { font-size: 18px; margin-top: 0; }
  button{ width:100%; padding:16px; margin:8px 0; border:2px solid #eee; border-radius:12px; background:#fff; color:#222; font-size:14px; cursor: pointer; transition: 0.2s; }
  button:hover { background: #f0f0f0; }
  button.selected{ background:#222; color:#fff; border-color: #222; }
  .tags span{ display:inline-block; background:#e0f2f1; color: #00796b; padding:6px 12px; border-radius:999px; margin:4px; font-size:14px; font-weight: bold; }
  #result { display: none; background: #222; color: #fff; }
  #result h2 { color: #fff; }
  .hidden { display: none; }

  /* ã‚¹ãƒãƒ›ç”¨ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
  @media screen and (max-width:480px){
    .container{ padding:15px; }
    button{ font-size:16px; padding:18px; }
  }
</style>
</head>

<body>
<div class="container">

  <div class="card">
    <h1>ğŸ§ éŸ³æ¥½MBTIè¨ºæ–­</h1>
    <p style="text-align:center">ã‚ãªãŸã®æ„Ÿæ€§ã«åˆã†éŸ³æ¥½ã‚¹ã‚¿ã‚¤ãƒ«ã‚’åˆ¤å®šã—ã¾ã™</p>
  </div>

  <div class="card" id="q-main-genre">
    <h2>Q1. å¥½ããªéŸ³æ¥½ã‚¸ãƒ£ãƒ³ãƒ«ã¯ï¼Ÿ</h2>
    <button onclick="setAnswer('genre','R',this)">ãƒ­ãƒƒã‚¯ç³»</button>
    <button onclick="setAnswer('genre','P',this)">ãƒãƒƒãƒ—ã‚¹ç³»</button>
  </div>

  <div class="card hidden" id="q-sub-rock">
    <h2>Q1'. ã†ã‚‹ã•ã„ç³»ã®éŸ³æ¥½ï¼ˆãƒ©ã‚¦ãƒ‰ãƒ»ãƒ‘ãƒ³ã‚¯ç­‰ï¼‰ã¯è´ãï¼Ÿ</h2>
    <button onclick="setAnswer('sub','Y',this)">ã¯ã„ï¼ˆçˆ†éŸ³æ´¾ï¼‰</button>
    <button onclick="setAnswer('sub','N',this)">ã„ã„ãˆï¼ˆãã‚Œã„ã‚æ´¾ï¼‰</button>
  </div>

  <div class="card hidden" id="q-sub-pop">
    <h2>Q1'. ã‚¢ã‚¤ãƒ‰ãƒ«ã¯å¥½ãï¼Ÿ</h2>
    <button onclick="setAnswer('sub','Y',this)">ã¯ã„ï¼ˆæ¨ã—ãŒã„ã‚‹ï¼‰</button>
    <button onclick="setAnswer('sub','N',this)">ã„ã„ãˆï¼ˆã‚ã¾ã‚Šè´ã‹ãªã„ï¼‰</button>
  </div>

  <div class="card">
    <h2>Q2. ãƒœãƒ¼ã‚«ãƒ«ã®æ€§åˆ¥ã€å¥½ã¿ã¯ï¼Ÿ</h2>
    <button onclick="setAnswer(1,'M',this)">ç”·æ€§ãƒœãƒ¼ã‚«ãƒ«</button>
    <button onclick="setAnswer(1,'F',this)">å¥³æ€§ãƒœãƒ¼ã‚«ãƒ«</button>
  </div>

  <div class="card">
    <h2>Q3. æ›²ã®é›°å›²æ°—ã¯ã©ã¡ã‚‰ãŒå¥½ãï¼Ÿ</h2>
    <button onclick="setAnswer(2,'P',this)">ãƒ•ã‚§ã‚¹ã§ç››ã‚Šä¸ŠãŒã‚‹ / å‰å‘ããƒ»å…ƒæ°—</button>
    <button onclick="setAnswer(2,'N',this)">è½ã¡ç€ã„ãŸ / æš—ã‚ãƒ»å†…çœçš„</button>
  </div>

  <div class="card">
    <h2>Q4. éŸ³æ¥½ã§ã‚ˆã‚Šé‡è¦–ã™ã‚‹ã®ã¯ï¼Ÿ</h2>
    <button onclick="setAnswer(3,'L',this)">æ­Œè©ãƒ»ç‰©èªé‡è¦–</button>
    <button onclick="setAnswer(3,'S',this)">æ›²èª¿ãƒ»ã‚µã‚¦ãƒ³ãƒ‰é‡è¦–</button>
  </div>

  <div class="card">
    <h2>Q5. ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆå‡ºèº«ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã¯å¥½ãï¼Ÿ</h2>
    <button onclick="setAnswer(4,'Y',this)">ã¯ã„ï¼ˆãƒœã‚«ãƒ­ãƒ»æ­Œã„æ‰‹ç­‰ï¼‰</button>
    <button onclick="setAnswer(4,'N',this)">ã„ã„ãˆ / ç‰¹ã«ã“ã ã‚ã‚‰ãªã„</button>
  </div>

  <div class="card">
    <h2>Q6. ã‚¤ãƒ³ã‚¹ãƒˆãƒãƒ³ãƒ‰ï¼ˆæ­Œãªã—ï¼‰ã¯å¥½ãï¼Ÿ</h2>
    <button onclick="setAnswer(5,'Y',this)">ã¯ã„ï¼ˆæ¥½å™¨ã®éŸ³ãŒå¥½ãï¼‰</button>
    <button onclick="setAnswer(5,'N',this)">ã„ã„ãˆ / æ­ŒãŒæ¬²ã—ã„</button>
  </div>

  <div class="card" id="result">
    <p style="margin-bottom:8px; opacity:0.8;">è¨ºæ–­çµæœ</p>
    <h2 id="mbti" style="font-size:32px; margin-bottom:10px;"></h2>
    <p id="title" style="font-size:18px; font-weight:bold; color:#ffeb3b;"></p>
    <div class="tags" id="tags" style="margin: 15px 0;"></div>
    
    <div style="background:rgba(255,255,255,0.1); padding:15px; border-radius:10px;">
      <h3 style="margin-top:0; font-size:16px;">ãŠã™ã™ã‚ã®å‚¾å‘</h3>
      <ul id="bands" style="font-size:14px; padding-left:20px;"></ul>
    </div>
    <button onclick="location.reload()" style="background:#fff; color:#222; margin-top:20px;">ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹</button>
  </div>

</div>

<script>
// å›ç­”ãƒ‡ãƒ¼ã‚¿ä¿æŒç”¨
const answers = {
  genre: null, // R or P
  sub: null,   // Y or N (ã†ã‚‹ã•ã„ç³» or ã‚¢ã‚¤ãƒ‰ãƒ«)
  1: null,     // M or F
  2: null,     // P or N
  3: null,     // L or S
  4: null,     // Y or N (ãƒãƒƒãƒˆç™º)
  5: null      // Y or N (ã‚¤ãƒ³ã‚¹ãƒˆ)
};

const titles = {
  RMLP:"ç–¾èµ°ã™ã‚‹è¨€è‘‰ã®æ—…äºº", RMSP:"éŸ³ã§é§†ã‘æŠœã‘ã‚‹å†’é™ºè€…", RMNP:"å†…çœã‚’åˆ»ã‚€ãƒ©ãƒ³ãƒŠãƒ¼", RMSN:"æ„Ÿæƒ…ã‚’çˆ†ç™ºã•ã›ã‚‹è¦³æ¸¬è€…",
  RFLP:"å£°ã«æ‹ã™ã‚‹ç–¾èµ°è€…", RFSP:"æºã‚Œã‚‹éŸ³ã®ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼", RFNP:"å¿ƒã‚’è¿½ã†ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ†ãƒ©ãƒ¼", RFSN:"é™ã‹ãªéŸ³ã®å“²å­¦è€…",
  PMLP:"æœˆå¤œã®ãƒ¡ãƒ­ãƒ‡ã‚£ã‚¹ãƒˆ", PMSP:"æ³¢ã«æºã‚Œã‚‹ã‚µã‚¦ãƒ³ãƒ‰æ´¾", PMNP:"æ·±æµ·ã®ãƒªã‚¹ãƒŠãƒ¼", PMSN:"æ„Ÿè¦šã§ç”Ÿãã‚‹å…±é³´è€…",
  PFLP:"éƒ¨å±‹ã¨æ­Œã®ä½äºº", PFSP:"éŸ³åœ§ã®ãƒ’ãƒ­ã‚¤ãƒ³", PFNP:"å¿ƒé™ã‹ã«æ­Œã†ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ†ãƒ©ãƒ¼", PFSN:"å¤œã‚’æŠ±ãˆã‚‹èªã‚Šéƒ¨"
};

function setAnswer(key, value, btn) {
  answers[key] = value;
  
  // ãƒœã‚¿ãƒ³ã®é¸æŠçŠ¶æ…‹ã‚’æ›´æ–°
  const buttons = btn.parentElement.querySelectorAll('button');
  buttons.forEach(b => b.classList.remove('selected'));
  btn.classList.add('selected');

  // Q1ã®åˆ†å²å‡¦ç†
  if (key === 'genre') {
    if (value === 'R') {
      document.getElementById('q-sub-rock').classList.remove('hidden');
      document.getElementById('q-sub-pop').classList.add('hidden');
      answers['sub'] = null; // ãƒªã‚»ãƒƒãƒˆ
    } else {
      document.getElementById('q-sub-pop').classList.remove('hidden');
      document.getElementById('q-sub-rock').classList.add('hidden');
      answers['sub'] = null; // ãƒªã‚»ãƒƒãƒˆ
    }
  }

  // å…¨ã¦å›ç­”ã•ã‚ŒãŸã‹ãƒã‚§ãƒƒã‚¯
  checkComplete();
}

function checkComplete() {
  // å¿…é ˆé …ç›®ãŒã™ã¹ã¦åŸ‹ã¾ã£ã¦ã„ã‚‹ã‹
  const requiredKeys = ['genre', 'sub', 1, 2, 3, 4, 5];
  const isAllAnswered = requiredKeys.every(k => answers[k] !== null);

  if (isAllAnswered) {
    showResult();
  }
}

function showResult() {
  const code = answers.genre + answers[1] + answers[2] + answers[3];
  
  document.getElementById('result').style.display = 'block';
  document.getElementById('mbti').textContent = code;
  document.getElementById('title').textContent = "ç§°å·ï¼š " + (titles[code] || "æœªçŸ¥ã®éŸ³æ¥½æ¢æ±‚è€…");

  // ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ç”Ÿæˆ
  const tagBox = document.getElementById('tags');
  tagBox.innerHTML = "";
  
  const activeTags = [];
  // Q1ã‚µãƒ–ã®æ¡ä»¶
  if (answers.genre === 'R' && answers.sub === 'Y') activeTags.push('#çˆ†éŸ³è€æ€§');
  if (answers.genre === 'P' && answers.sub === 'Y') activeTags.push('#ã‚¢ã‚¤ãƒ‰ãƒ«æ¨ã—');
  // å¾ŒåŠ2å•
  if (answers[4] === 'Y') activeTags.push('#ãƒãƒƒãƒˆç™ºã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆ');
  if (answers[5] === 'Y') activeTags.push('#éŸ³ã®æ¢ç©¶è€…');

  activeTags.forEach(tag => {
    const span = document.createElement('span');
    span.textContent = tag;
    tagBox.appendChild(span);
  });

  // ãŠã™ã™ã‚ï¼ˆãƒ€ãƒŸãƒ¼ï¼‰
  const list = document.getElementById('bands');
  list.innerHTML = "<li>ã‚ãªãŸã®è¨ºæ–­çµæœã«åŸºã¥ã„ãŸã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã‚’åˆ†æä¸­...</li><li>GitHubã®ã‚³ãƒ¼ãƒ‰ã§ã“ã“ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ãã ã•ã„</li>";
  
  // çµæœã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
  document.getElementById('result').scrollIntoView({ behavior: 'smooth' });
}
</script>

</body>
</html>
